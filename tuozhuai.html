<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			#box{
				width: 100px;
				height: 100px;
				background: red;
				position: absolute;
				top:0;
				left: 0;
			}
			#box1{
				width: 100px;
				height: 100px;
				background: red;
				position: absolute;
				top:100px;
				left: 0;
			}
		</style>
	</head>
	<body>
		<div id="box"></div>
		<div id="box1"></div>
	</body>
	<script>
		function Init(id){
			this.box=document.getElementById(id);
			this.disX=0;
			this.disY=0;
		};
		
		Init.prototype.fn=function(){
			console.log(this);
			var that=this;
			this.box.onmousedown=function(ev){
				that.fnDown(ev);
			}
		};
		Init.prototype.fnDown=function(ev){
			console.log(this)
			var that=this;
			this.disX=ev.pageX-this.box.offsetLeft;
			this.disY=ev.pageY-this.box.offsetTop;
			
			document.onmousemove=function(ev){
				that.fnMove(ev);
			}
			document.onmouseup=function(){
				that.fnUp();
			}
			
			ev.preventDefault();
				
		};
		Init.prototype.fnMove=function(ev){
			console.log(this);
		
			this.box.style.left=ev.pageX-this.disX+"px";
			this.box.style.top=ev.pageY-this.disY+"px";
		};
		Init.prototype.fnUp=function(){
			console.log(this);
			document.onmousemove=null;
			document.onmouseout=null;
		};
		
		var t1=new Init("box");
		var t2=new Init("box1");
		
		t1.fn();
		t2.fn();
	</script>
</html>
